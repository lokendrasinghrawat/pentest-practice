#!/bin/bash
#
#	This script needs server.crt which can be downloaded from browser easily.
#	and server.key which is not that easy to get, once you get it use this to generate
#	.pfx client cert for two way SSL/TLS which can be imorted to browser with ease.
#
read -e -p "Enter path to server.crt : " cert_path
read -e -p "Enter path to server.key : " key_path
#
#	using server key to generate server.csr
#
if [[ -e $cert_path ]] && [[ -e $key_path ]];then
	openssl req -new -key $key_path -out server.csr	# generate server.csr
	openssl x509 -req -days 365 -in server.csr -signkey $key_path -out client.crt	#generate client.crt
	openssl pkcs12 -export -out certificate.pfx -inkey $key_path -in $cert_path -certfile client.crt
	echo "[+]Removing server.csr and client.crt"
	rm client.crt server.csr
	echo "[+]Import certificate.pfx into your browser."
else
	exit 1	
